{"version":3,"sources":["App.js","index.js","App.module.css"],"names":["App","useState","canvasUrl","setCanvasUrl","p","setP","s","setS","o","setO","isImageLoaded","setIsImageLoaded","imageRef","useRef","canvasRef","useEffect","current","image","canvas","ctx","getContext","imageAspectRatio","naturalWidth","naturalHeight","width","height","w","h","dx","dy","globalAlpha","drawImage","toDataURL","ex","console","error","alt","ref","src","className","styles","img","onLoad","crossOrigin","type","min","max","step","value","style","onChange","target","preview","watermarkOverlay","background","rootElement","document","getElementById","createRoot","render","module","exports"],"mappings":"kLAuGeA,EA7FI,WACjB,MAAkCC,mBAAS,IAAG,mBAAvCC,EAAS,KAAEC,EAAY,KAE9B,EAAkBF,mBAAS,GAAE,mBAAtBG,EAAC,KAAEC,EAAI,KACd,EAAkBJ,mBAAS,IAAG,mBAAvBK,EAAC,KAAEC,EAAI,KACd,EAAkBN,mBAAS,IAAI,mBAAxBO,EAAC,KAAEC,EAAI,KACd,EAA0CR,oBAAS,GAAM,mBAAlDS,EAAa,KAAEC,EAAgB,KAEhCC,EAAWC,iBAAO,MAClBC,EAAYD,iBAAO,MAmCzB,OAlCAE,qBAAU,WACR,GAAKD,EAAUE,SAAYJ,EAASI,SAAYN,EAAhD,CAEA,IAAiBO,EAAUL,EAAnBI,QACSE,EAAWJ,EAApBE,QAEFG,EAAMD,EAAOE,WAAW,MAExBC,EAAmBJ,EAAMK,aAAeL,EAAMM,cAGpD,EACEF,EAAmB,EACf,CAACH,EAAOM,MAAON,EAAOM,MAAQH,GAC9B,CAACH,EAAOO,OAASJ,EAAkBH,EAAOO,QAAO,mBAHhDC,EAAC,KAAEC,EAAC,KAKPN,EAAmB,EACrBH,EAAOO,OAASP,EAAOM,MAAQH,EAE/BH,EAAOM,MAAQN,EAAOO,OAASJ,EAGjC,IAAOO,EAAWxB,EAAIc,EAAOM,MAAlBK,EAAyBzB,EAAIc,EAAOO,OAE/CN,EAAIW,YAActB,EAClBW,EAAIY,UAAUd,EAfE,EAeSW,EAfN,EAecC,EAAIH,EAAS,EAALE,EAAQD,EAAS,EAALE,GAErD,IACE1B,EAAae,EAAOc,YAGtB,CAFE,MAAOC,GACPC,QAAQC,MAAMF,EAChB,CA9BqE,CA+BvE,GAAG,CAACvB,EAAeN,EAAGE,EAAGE,IAGvB,qCACE,qBACE4B,IAAI,GACJC,IAAKzB,EACL0B,IAnDN,kHAoDMC,UAAWC,IAAOC,IAClBC,OAAQ,kBAAM/B,GAAiB,EAAK,EACpCgC,YAAY,cAEd,wBAAQnB,MAAOlB,EAAGmB,OAAQnB,EAAG+B,IAAKvB,EAAWyB,UAAWC,IAAOtB,SAC/D,uBACE0B,KAAK,QACLC,IAAK,EACLC,IAAK,EACLC,KAAM,IACNC,MAAO5C,EACP6C,MAAO,CAAEzB,MAAO,KAChB0B,SAAU,gBAAaF,EAAK,EAAfG,OAAUH,MAAK,OAAS3C,EAAK2C,EAAM,IAGlD,uBACEJ,KAAK,QACLC,IAAK,GACLC,IAAK,IACLE,MAAO1C,EACP4C,SAAU,gBAAaF,EAAK,EAAfG,OAAUH,MAAK,OAASzC,EAAKyC,EAAM,IAGlD,uBACEJ,KAAK,QACLC,IAAK,EACLC,IAAK,EACLC,KAAM,GACNC,MAAOxC,EACP0C,SAAU,gBAAaF,EAAK,EAAfG,OAAUH,MAAK,OAASvC,EAAKuC,EAAM,IAElD,qBAAKT,UAAWC,IAAOY,QAAQ,SAC7B,qBACEb,UAAWC,IAAOa,iBAClBJ,MAAO,CACLK,WAAW,QAAD,OAAUpD,EAAS,aAMzC,EChGMqD,EAAcC,SAASC,eAAe,QAC/BC,qBAAWH,GAEnBI,OACH,cAAC,aAAU,UACT,cAAC,EAAG,M,oBCTRC,EAAOC,QAAU,CAAC,OAAS,oBAAoB,IAAM,iBAAiB,QAAU,qBAAqB,iBAAmB,8B","file":"static/js/main.4a994d29.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\nimport styles from \"./App.module.css\";\n\n// const IMAGE_URL =\n//   \"https://images.pexels.com/photos/1598505/pexels-photo-1598505.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2\";\n\nconst IMAGE_URL =\n  \"https://images.pexels.com/photos/1467475/pexels-photo-1467475.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2\";\n\nexport const App = () => {\n  const [canvasUrl, setCanvasUrl] = useState(\"\");\n\n  const [p, setP] = useState(0);\n  const [s, setS] = useState(40);\n  const [o, setO] = useState(0.5);\n  const [isImageLoaded, setIsImageLoaded] = useState(false);\n\n  const imageRef = useRef(null);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    if (!canvasRef.current || !imageRef.current || !isImageLoaded) return;\n\n    const { current: image } = imageRef;\n    const { current: canvas } = canvasRef;\n\n    const ctx = canvas.getContext(\"2d\");\n\n    const imageAspectRatio = image.naturalWidth / image.naturalHeight;\n\n    const [x, y] = [0, 0];\n    const [w, h] =\n      imageAspectRatio > 1\n        ? [canvas.width, canvas.width / imageAspectRatio]\n        : [canvas.height * imageAspectRatio, canvas.height];\n\n    if (imageAspectRatio > 1) {\n      canvas.height = canvas.width / imageAspectRatio;\n    } else {\n      canvas.width = canvas.height * imageAspectRatio;\n    }\n\n    const [dx, dy] = [p * canvas.width, p * canvas.height];\n\n    ctx.globalAlpha = o;\n    ctx.drawImage(image, x + dx, y + dy, w - dx * 2, h - dy * 2);\n\n    try {\n      setCanvasUrl(canvas.toDataURL());\n    } catch (ex) {\n      console.error(ex);\n    }\n  }, [isImageLoaded, p, s, o]);\n\n  return (\n    <>\n      <img\n        alt=\"\"\n        ref={imageRef}\n        src={IMAGE_URL}\n        className={styles.img}\n        onLoad={() => setIsImageLoaded(true)}\n        crossOrigin=\"anonymous\"\n      />\n      <canvas width={s} height={s} ref={canvasRef} className={styles.canvas} />\n      <input\n        type=\"range\"\n        min={0}\n        max={1}\n        step={0.01}\n        value={p}\n        style={{ width: 200 }}\n        onChange={({ target: { value } }) => setP(value)}\n      />\n\n      <input\n        type=\"range\"\n        min={40}\n        max={120}\n        value={s}\n        onChange={({ target: { value } }) => setS(value)}\n      />\n\n      <input\n        type=\"range\"\n        min={0}\n        max={1}\n        step={0.1}\n        value={o}\n        onChange={({ target: { value } }) => setO(value)}\n      />\n      <div className={styles.preview}>\n        <div\n          className={styles.watermarkOverlay}\n          style={{\n            background: `url('${canvasUrl}')`\n          }}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default App;\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"App_canvas__1KgDx\",\"img\":\"App_img__2TF4E\",\"preview\":\"App_preview__hvNF4\",\"watermarkOverlay\":\"App_watermarkOverlay__3p9St\"};"],"sourceRoot":""}